# lmtp Parameter einstellen{{{
#
# usage: lmtp_conf
#
lmtp_conf() {
#
postconf -c $MAIL_CONFIG | grep '^lmtp_' | sed -e 's# = #="#g ; s#\$#\\\$#g ; s#$#"#g' >${gv_WorkDir}/postfix$$
read_file -f ${gv_WorkDir}/postfix$$
rm -rf  ${gv_WorkDir}/postfix$$ &>/dev/null
#
# Funktion conf_lmtp_menue{{{
LMTP_TITLE=$(gettext 'Konfiguration::LMTP')
conf_lmtp_menue() {
LMTP_MENU=(lmtp_cache_connection \"\$lmtp_cache_connection\"
lmtp_connect_timeout \"\$lmtp_connect_timeout\"
lmtp_data_done_timeout \"\$lmtp_data_done_timeout\"
lmtp_data_init_timeout \"\$lmtp_data_init_timeout\"
lmtp_data_xfer_timeout \"\$lmtp_data_xfer_timeout\"
lmtp_destination_concurrency_limit \"\$lmtp_destination_concurrency_limit\"
lmtp_destination_recipient_limit \"\$lmtp_destination_recipient_limit\"
lmtp_lhlo_timeout \"\$lmtp_lhlo_timeout\"
lmtp_mail_timeout \"\$lmtp_mail_timeout\"
lmtp_quit_timeout \"\$lmtp_quit_timeout\"
lmtp_rcpt_timeout \"\$lmtp_rcpt_timeout\"
lmtp_rset_timeout \"\$lmtp_rset_timeout\"
lmtp_sasl_auth_enable \"\$lmtp_sasl_auth_enable\"
lmtp_sasl_password_maps \"\$lmtp_sasl_password_maps\"
lmtp_sasl_security_options \"\$lmtp_sasl_security_options\"
lmtp_send_xforward_command \"\$lmtp_send_xforward_command\"
lmtp_skip_quit_response \"\$lmtp_skip_quit_response\"
lmtp_tcp_port \"\$lmtp_tcp_port\"
lmtp_xforward_timeout \"\$lmtp_xforward_timeout\"
postfix \"reload\"
$gv_Back \"\")
menubox "$LMTP_TITLE" "$gv_Menupoint" "$LMTP_MENU"
}
#}}}
#
conf_lmtp_menue
while [ "$gv_Auswahl" ] ; do
	case "$gv_Auswahl" in
		HELP*)	script_help lmtp_help
			conf_lmtp_menue
			;;
		lmtp_ca*)
			# LMTP Verbindung, fuer mehrere mails nacheinander nutzen?{{{
			LMTP_MORE_CONNECT_MSG=$(gettext 'LMTP Verbindung fuer mehrere mails nacheinander nutzen (ja/nein)?')
			ja_nein_tausch "$LMTP_TITLE" "$LMTP_MORE_CONNECT_MSG"
			lmtp_cache_connection="$WERT"
			postconf -e lmtp_cache_connection="$WERT"
			unset -- WERT
			#}}}
			conf_lmtp_menue
			;;
		lmtp_co*)
			# Timeout fuer den Aufbau der Verbindung{{{
			number_input -s "${lmtp_connect_timeout%?}"
			if [ "$NUMBER" ] ; then
				lmtp_connect_timeout="$NUMBER"
				postconf -e lmtp_connect_timeout="$NUMBER"
			fi
			#}}}
			conf_lmtp_menue
			;;
		lmtp_data_d*)
			# Timeout nach erfolgter Übertragung der mail per LMTP{{{
			number_input -s "${lmtp_data_done_timeout%?}"
			if [ "$NUMBER" ] ; then
				lmtp_data_done_timeout="$NUMBER"
				postconf -e lmtp_data_done_timeout="$NUMBER"
			fi
			#}}}
			conf_lmtp_menue
			;;
		lmtp_data_i*)
			# Timeout nach dem LMTP Kommando DATA{{{
			number_input -s "${lmtp_data_init_timeout%?}"
			if [ "$NUMBER" ] ; then
				lmtp_data_init_timeout="$NUMBER"
				postconf -e lmtp_data_init_timeout="$NUMBER"
			fi
			#}}}
			conf_lmtp_menue
			;;
		lmtp_data_x*)
			# Timeout waehrend der Übertragung zu einem LMTP Server{{{
			number_input -s "${lmtp_data_xfer_timeout%?}"
			if [ "$NUMBER" ] ; then
				lmtp_data_xfer_timeout="$NUMBER"
				postconf -e lmtp_data_xfer_timeout="$NUMBER"
			fi
			#}}}
			conf_lmtp_menue
			;;
		lmtp_destination_co*)
			# max. Anzahl gleichzeitiger Verbindungen per{{{
			# LMTP zu einem Rechner
			number_input -i "$lmtp_destination_concurrency_limit"
			if [ "$NUMBER" ] ; then
				lmtp_destination_concurrency_limit="$NUMBER"
				postconf -e lmtp_destination_concurrency_limit="$NUMBER"
			fi
			#}}}
			conf_lmtp_menue
			;;
		lmtp_destination_re*)
			# max. Anzahl der Empfaenger in einer mail{{{
			number_input -i "$lmtp_destination_recipient_limit"
			if [ "$NUMBER" ] ; then
				lmtp_destination_recipient_limit="$NUMBER"
				postconf -e lmtp_destination_recipient_limit="$NUMBER"
			fi
			#}}}
			conf_lmtp_menue
			;;
		lmtp_l*)
			# Timeout nach dem LMTP Kommando LHLO{{{
			number_input -s "${lmtp_lhlo_timeout%?}"
			if [ "$NUMBER" ] ; then
				lmtp_lhlo_timeout="$NUMBER"
				postconf -e lmtp_lhlo_timeout="$NUMBER"
			fi
			#}}}
			conf_lmtp_menue
			;;
		lmtp_m*)
			# Timeout nach dem LMTP Kommando MAIL FROM:{{{
			number_input -s "${lmtp_mail_timeout%?}"
			if [ "$NUMBER" ] ; then
				lmtp_mail_timeout="$NUMBER"
				postconf -e lmtp_mail_timeout="$NUMBER"
			fi
			#}}}
			conf_lmtp_menue
			;;
		lmtp_q*)
			# Timeout nach dem LMTP Kommando QUIT{{{
			number_input -s "${lmtp_quit_timeout%?}"
			if [ "$NUMBER" ] ; then
				lmtp_quit_timeout="$NUMBER"
				postconf -e lmtp_quit_timeout="$NUMBER"
			fi
			#}}}
			conf_lmtp_menue
			;;
		lmtp_rc*)
			# Timeout nach dem LMTP Kommando RCPT TO:{{{
			number_input -s "${lmtp_rcpt_timeout%?}"
			if [ "$NUMBER" ] ; then
				lmtp_rcpt_timeout="$NUMBER"
				postconf -e lmtp_rcpt_timeout="$NUMBER"
			fi
			#}}}
			conf_lmtp_menue
			;;
		lmtp_rs*)
			# Timeout nach dem LMTP Kommando RSET{{{
			number_input -s "${lmtp_rset_timeout%?}"
			if [ "$NUMBER" ] ; then
				lmtp_rset_timeout="$NUMBER"
				postconf -e lmtp_rset_timeout="$NUMBER"
			fi
			#}}}
			conf_lmtp_menue
			;;
		lmtp_sasl_a*)
			# SMTP-AUTH beim Versand ueber LMTP aktivieren?{{{
			LMTP_SASL_AUTH_MSG=$(gettext 'SMTP-AUTH beim Versand ueber LMTP aktivieren (ja/nein)?')
			ja_nein_tausch "$LMTP_TITLE" "$LMTP_SASL_AUTH_MSG"
			lmtp_sasl_auth_enable="$WERT"
			postconf -e lmtp_sasl_auth_enable="$WERT"
			unset -- WERT
			#}}}
			conf_lmtp_menue
			;;
		lmtp_sasl_p*)
			# Tabelle fuer Kennungen/Passwoertern fuer authentifiezierte LMTP Verbindungen{{{
			tab_support_wahl "$gv_Auswahl"
			lmtp_sasl_password_maps="$MAPS"
			postconf -e lmtp_sasl_password_maps="$MAPS"
			#}}}
			conf_lmtp_menue
			;;
		lmtp_sasl_s*)
			# Authentifizierungs Methoden{{{
			mail_mechanism
			if [ "$WERT" ] ; then
				lmtp_sasl_security_options="$WERT"
				postconf -e lmtp_sasl_security_options="$WERT"
			fi
			#}}}
			conf_lmtp_menue
			;;
		lmtp_send_*)
			# {{{
			LMTP_SEND_XFORWARD_COMD_MSG=$(gettext 'Soll ein XFORWARD Befehl an den LMTP Server gesendet werden (ja/nein)?')
			ja_nein_tausch "$LMTP_TITLE" "$LMTP_SEND_XFORWARD_COMD_MSG"
			lmtp_send_xforward_command="$WERT"
			postconf -e lmtp_send_xforward_command="$WERT"
			unset -- WERT
			#}}}
			conf_lmtp_menue
			;;
		lmtp_sk*)
			# Beenden einer LMTP Sitzung nach dem QUIT Kommando, ohne auf Antwort zu warten?{{{
			LMTP_SKIP_QUIT_RESPONSE_MSG=$(gettext 'Beenden einer LMTP Sitzung nach dem QUIT Kommando, ohne auf Antwort zu warten (ja/nein)?')
			ja_nein_tausch "$LMTP_TITLE" "$LMTP_SKIP_QUIT_RESPONSE_MSG"
			lmtp_skip_quit_response="$WERT"
			postconf -e lmtp_skip_quit_response="$WERT"
			unset -- WERT
			#}}}
			conf_lmtp_menue
			;;
		lmtp_t*)
			# lmtp TCP Port vergeben{{{
			LMTP_PORT_MSG=$(gettext 'Geben Sie den Port fuer das Protokoll LMTP ein. Standard ist 24.')
			number_input "$LMTP_TITLE" "$LMTP_PORT_MSG" "$lmtp_tcp_port"
			if [ -n "$NUMBER" ] ; then
				lmtp_tcp_port="$NUMBER"
				postconf -e lmtp_tcp_port="$NUMBER"
			fi
			#}}}
		 	conf_lmtp_menue
			;;
		lmtp_x*)
			# Timeout #########HilfeText fehlt######################{{{
			number_input -s "${lmtp_xforward_timeout%?}"
			if [ "$NUMBER" ] ; then
				lmtp_xforward_timeout="$NUMBER"
				postconf -e lmtp_xforward_timeout="$NUMBER"
			fi
			#}}}
			conf_lmtp_menue
			;;
		p*)	postfix_start_reload
			break
			;;
		$gv_Back)	break
			;;
	esac
done
}
#}}}
### Modeline {{{
### vim:ft=zsh:foldmethod=marker
### vim:set ts=4:                                                                               
### }}}
