#!/bin/sh

EXEC=/usr/lib/kwtools/net
SBIN_PATH=/usr/sbin

cd $SBIN_PATH
for i in kwfirewall ; do
	if [ -L "$i" ] ; then
		rm "$i" >/dev/null 2>&1
		ln -sf ${EXEC}/${i} ${SBIN_PATH}
	else
		ln -sf ${EXEC}/${i} ${SBIN_PATH}
	fi
done
				
echo ""
echo "Compile functions from kwtools-scripts"
echo ""
/bin/zsh -fc 'setopt extendedglob ; for i in /usr/share/kwtools/functions/kwfirewall ; do
	zcompile -U -M $i.zwc $i/*~*.zwc(^/) ; chmod 644 $i.zwc ; done'	

exit 0
